# 🏗️ OmniFy Cloud Connect - Visual Architecture Overview

## 📊 System Architecture (ASCII Art)

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                           OMNIFY CLOUD CONNECT ARCHITECTURE                     │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   FRONTEND       │    │   API GATEWAY    │    │  BUSINESS LOGIC  │    │   INTEGRATIONS  │
│                 │    │                 │    │                 │    │                 │
│  ┌─────────────┐ │    │  ┌─────────────┐ │    │  ┌─────────────┐ │    │  ┌─────────────┐ │
│  │React Dashboard│ │    │  │FastAPI Gateway│ │    │  │AgentKit Agents│ │    │  │TripleWhale API│ │
│  │(Primary)      │ │
│  └─────────────┘ │
│                 │
│  ┌─────────────┐ │
│  │HubSpot API  │ │
│  │(Secondary)  │ │
│  └─────────────┘ │
│                 │
│  ┌─────────────┐ │
│  │Klaviyo API  │ │
│  │(Tertiary)   │ │
│  └─────────────┘ │
│                 │
│  ┌─────────────┐ │
│  │GoHighLevel  │ │
│  │API (Low Pri)│ │
│  └─────────────┘ │    │  └─────────────┘ │    │  └─────────────┘ │    │  └─────────────┘ │
│                 │    │                 │    │                 │    │                 │
│  ┌─────────────┐ │    │  ┌─────────────┐ │    │  ┌─────────────┐ │    │  ┌─────────────┐ │
│  │EYES Module  │ │    │  │JWT Auth     │ │    │  │Brain Logic  │ │    │  │LinkedIn Ads │ │
│  └─────────────┘ │    │  └─────────────┘ │    │  └─────────────┘ │    │  └─────────────┘ │
│                 │    │                 │    │                 │    │                 │
│  ┌─────────────┐ │    │  ┌─────────────┐ │    │  ┌─────────────┐ │    │  ┌─────────────┐ │
│  │Brain Panel  │ │    │  │Rate Limiting│ │    │  │Platform Mgr │ │    │  │Shopify API   │ │
│  └─────────────┘ │    │  └─────────────┘ │    │  └─────────────┘ │    │  └─────────────┘ │
│                 │    │                 │    │                 │    │                 │
│  ┌─────────────┐ │    │  ┌─────────────┐ │    │  ┌─────────────┐ │    │  ┌─────────────┐ │
│  │Analytics    │ │    │  │CORS Middleware│ │    │  │Workflows    │ │    │  │Stripe API    │ │
│  └─────────────┘ │    │  └─────────────┘ │    │  └─────────────┘ │    │  └─────────────┘ │
└─────────────────┘    └─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │                       │
         └───────────────────────┼───────────────────────┼───────────────────────┘
                                 │                       │
                                 ▼                       ▼
                    ┌─────────────────┐    ┌─────────────────┐
                    │   DATA LAYER     │    │ INFRASTRUCTURE  │
                    │                 │    │                 │
                    │  ┌─────────────┐ │    │  ┌─────────────┐ │
                    │  │MongoDB      │ │    │  │Docker       │ │
                    │  └─────────────┘ │    │  └─────────────┘ │
                    │                 │    │                 │
                    │  ┌─────────────┐ │    │  ┌─────────────┐ │
                    │  │Redis Cache  │ │    │  │Monitoring   │ │
                    │  └─────────────┘ │    │  └─────────────┘ │
                    │                 │    │                 │
                    │  ┌─────────────┐ │    │  ┌─────────────┐ │
                    │  │RabbitMQ     │ │    │  │Logging      │ │
                    │  └─────────────┘ │    │  └─────────────┘ │
                    └─────────────────┘    └─────────────────┘
```

## 🔄 User Flow (ASCII Art)

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              USER ONBOARDING FLOW                              │
└─────────────────────────────────────────────────────────────────────────────────┘

    User                    Frontend                Backend                TripleWhale/HubSpot/Klaviyo
     │                         │                      │                        │
     │ 1. Visit Dashboard      │                      │                        │
     ├────────────────────────►│                      │                        │
     │                         │ 2. GET /health       │                        │
     │                         ├─────────────────────►│                        │
     │                         │ 3. System Status     │                        │
     │                         ◄─────────────────────┤                        │
     │                         │                      │                        │
     │ 4. Sign Up              │                      │                        │
     ├────────────────────────►│                      │                        │
     │                         │ 5. POST /auth/register│                        │
     │                         ├─────────────────────►│                        │
     │                         │ 6. JWT Token + Org ID│                        │
     │                         ◄─────────────────────┤                        │
     │                         │                      │                        │
     │ 7. Connect GoHighLevel  │                      │                        │
     ├────────────────────────►│                      │                        │
     │                         │ 8. POST /platforms/connect│                    │
     │                         ├─────────────────────►│                        │
     │                         │                      │ 9. Test API Connection│
     │                         │                      ├───────────────────────►│
     │                         │                      │ 10. Connection Success│
     │                         │                      ◄───────────────────────┤
     │                         │ 11. Integration Ready│                        │
     │                         ◄─────────────────────┤                        │
     │                         │                      │                        │
     │ 12. Access EYES Module │                      │                        │
     ├────────────────────────►│                      │                        │
     │                         │ 13. GET /eyes/segments│                        │
     │                         ├─────────────────────►│                        │
     │                         │                      │ 14. Fetch Contacts    │
     │                         │                      ├───────────────────────►│
     │                         │                      │ 15. Contact Data      │
     │                         │                      ◄───────────────────────┤
     │                         │ 16. Segmented Data   │                        │
     │                         ◄─────────────────────┤                        │
     │ 17. View Segments       │                      │                        │
     ◄────────────────────────┤                      │                        │
```

## 🧠 Brain Logic Modules Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                           BRAIN LOGIC MODULES                                   │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   CREATIVE      │    │     MARKET      │    │     CLIENT      │    │      EYES      │
│  INTELLIGENCE   │    │  INTELLIGENCE   │    │  INTELLIGENCE   │    │   AT-RISK      │
│                 │    │                 │    │                 │    │   SEGMENTS      │
│ ┌─────────────┐ │    │ ┌─────────────┐ │    │ ┌─────────────┐ │    │ ┌─────────────┐ │
│ │AIDA Analysis│ │    │ │Trend Pred.  │ │    │ │Behavior     │ │    │ │Clustering   │ │
│ └─────────────┘ │    │ └─────────────┘ │    │ │Analysis     │ │    │ └─────────────┘ │
│                 │    │                 │    │ └─────────────┘ │    │                 │
│ ┌─────────────┐ │    │ ┌─────────────┐ │    │ ┌─────────────┐ │    │ ┌─────────────┐ │
│ │Brand        │ │    │ │Competitor   │ │    │ │Success      │ │    │ │Churn Pred.  │ │
│ │Compliance   │ │    │ │Analysis     │ │    │ │Prediction   │ │    │ │30/60/90d    │ │
│ └─────────────┘ │    │ └─────────────┘ │    │ └─────────────┘ │    │ └─────────────┘ │
│                 │    │                 │    │                 │    │                 │
│ ┌─────────────┐ │    │ ┌─────────────┐ │    │ ┌─────────────┐ │    │ ┌─────────────┐ │
│ │Performance  │ │    │ │Opportunity  │ │    │ │Churn Risk   │ │    │ │Cross-Platform│ │
│ │Optimization │ │    │ │Identification│ │    │ │Analysis     │ │    │ │Analysis     │ │
│ └─────────────┘ │    │ └─────────────┘ │    │ └─────────────┘ │    │ └─────────────┘ │
└─────────────────┘    └─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │                       │
         └───────────────────────┼───────────────────────┼───────────────────────┘
                                 │                       │
                                 ▼                       ▼
                    ┌─────────────────┐    ┌─────────────────┐
                    │  CUSTOMIZATION  │    │   AI PROCESSING │
                    │     ENGINE      │    │                 │
                    │                 │    │ ┌─────────────┐ │
                    │ ┌─────────────┐ │    │ │GPT-4o-mini  │ │
                    │ │Vertical     │ │    │ └─────────────┘ │
                    │ │Templates    │ │    │                 │
                    │ └─────────────┘ │    │ ┌─────────────┐ │
                    │                 │    │ │ML Models    │ │
                    │ ┌─────────────┐ │    │ └─────────────┘ │
                    │ │Brand        │ │    │                 │
                    │ │Customization│ │    │ ┌─────────────┐ │
                    │ └─────────────┘ │    │ │Clustering   │ │
                    │                 │    │ │Algorithms   │ │
                    │ ┌─────────────┐ │    │ └─────────────┘ │
                    │ │Custom       │ │    │                 │
                    │ │Workflows    │ │    │ ┌─────────────┐ │
                    │ └─────────────┘ │    │ │Prediction   │ │
                    │                 │    │ │Models       │ │
                    │ ┌─────────────┐ │    │ └─────────────┘ │
                    │ │Integration  │ │    └─────────────────┘
                    │ │Config       │ │
                    │ └─────────────┘ │
                    └─────────────────┘
```

## 🔌 Platform Integration Flow

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                        PLATFORM INTEGRATION FLOW                                │
└─────────────────────────────────────────────────────────────────────────────────┘

    OmniFy Platform Manager
    ┌─────────────────────────────────────────────────────────────────────────────┐
    │                                                                             │
    │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐  │
    │  │Input        │    │Circuit      │    │Rate         │    │Cache        │  │
    │  │Validation   │    │Breaker      │    │Limiter      │    │Manager      │  │
    │  └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘  │
    │         │                   │                   │                   │      │
    │         └───────────────────┼───────────────────┼───────────────────┘      │
    │                             │                   │                           │
    │                             ▼                   ▼                           │
    │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐  │
    │  │Data         │    │Data         │    │Data         │    │Data         │  │
    │  │Transformation│    │Enrichment   │    │Storage      │    │Retrieval    │  │
    │  └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘  │
    └─────────────────────────────────────────────────────────────────────────────┘
                     │                   │                   │
                     ▼                   ▼                   ▼
    ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
    │  GoHighLevel    │    │  LinkedIn Ads    │    │  Shopify API    │
    │  API            │    │  API             │    │                 │
    │                 │    │                 │    │                 │
    │ ┌─────────────┐ │    │ ┌─────────────┐ │    │ ┌─────────────┐ │
    │ │Contacts     │ │    │ │Campaigns    │ │    │ │Products     │ │
    │ └─────────────┘ │    │ └─────────────┘ │    │ └─────────────┘ │
    │                 │    │                 │    │                 │
    │ ┌─────────────┐ │    │ ┌─────────────┐ │    │ ┌─────────────┐ │
    │ │Workflows   │ │    │ │Analytics    │ │    │ │Orders       │ │
    │ └─────────────┘ │    │ └─────────────┘ │    │ └─────────────┘ │
    │                 │    │                 │    │                 │
    │ ┌─────────────┐ │    │ ┌─────────────┐ │    │ ┌─────────────┐ │
    │ │Campaigns   │ │    │ │Audiences    │ │    │ │Customers    │ │
    │ └─────────────┘ │    │ └─────────────┘ │    │ └─────────────┘ │
    └─────────────────┘    └─────────────────┘    └─────────────────┘
```

## 🎯 EYES Module - Customer Segmentation Flow

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                    EYES MODULE - CUSTOMER SEGMENTATION FLOW                     │
└─────────────────────────────────────────────────────────────────────────────────┘

    Start
      │
      ▼
┌─────────────┐
│Load Customer│
│Data         │
└─────────────┘
      │
      ▼
┌─────────────┐
│Validate     │
│Consent      │
│Fields       │
└─────────────┘
      │
      ▼
┌─────────────┐
│Feature      │
│Engineering  │
└─────────────┘
      │
      ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                        CLUSTERING ANALYSIS                                  │
│                                                                             │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                    │
│  │K-Means      │    │DBSCAN       │    │Agglomerative│                    │
│  │Clustering   │    │Clustering   │    │Clustering   │                    │
│  └─────────────┘    └─────────────┘    └─────────────┘                    │
│         │                   │                   │                        │
│         └───────────────────┼───────────────────┘                        │
│                             │                                              │
│                             ▼                                              │
│  ┌─────────────┐                                                          │
│  │Evaluate     │                                                          │
│  │Silhouette   │                                                          │
│  │Score >=0.45 │                                                          │
│  └─────────────┘                                                          │
└─────────────────────────────────────────────────────────────────────────────┘
      │
      ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                        CHURN PREDICTION                                    │
│                                                                             │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                    │
│  │30-Day      │    │60-Day      │    │90-Day      │                    │
│  │Churn Model │    │Churn Model │    │Churn Model │                    │
│  └─────────────┘    └─────────────┘    └─────────────┘                    │
│         │                   │                   │                        │
│         └───────────────────┼───────────────────┘                        │
│                             │                                              │
│                             ▼                                              │
│  ┌─────────────┐                                                          │
│  │AUC Score    │                                                          │
│  │>=0.70      │                                                          │
│  └─────────────┘                                                          │
└─────────────────────────────────────────────────────────────────────────────┘
      │
      ▼
┌─────────────┐
│Generate     │
│Segment      │
│Analysis     │
└─────────────┘
      │
      ▼
┌─────────────┐
│Cross-Platform│
│Analysis     │
└─────────────┘
      │
      ▼
┌─────────────┐
│Learning     │
│Insights     │
└─────────────┘
      │
      ▼
┌─────────────┐
│Store        │
│Results      │
└─────────────┘
      │
      ▼
┌─────────────┐
│Display      │
│Dashboard    │
└─────────────┘
      │
      ▼
     End
```

## 🔒 Security Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                            SECURITY LAYERS                                      │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   AUTHENTICATION│    │   AUTHORIZATION │    │   DATA          │    │   COMPLIANCE    │
│                 │    │                 │    │   PROTECTION    │    │                 │
│ ┌─────────────┐ │    │ ┌─────────────┐ │    │ ┌─────────────┐ │    │ ┌─────────────┐ │
│ │JWT Tokens   │ │    │ │RBAC         │ │    │ │Encryption   │ │    │ │GDPR         │ │
│ └─────────────┘ │    │ └─────────────┘ │    │ └─────────────┘ │    │ └─────────────┘ │
│                 │    │                 │    │                 │    │                 │
│ ┌─────────────┐ │    │ ┌─────────────┐ │    │ ┌─────────────┐ │    │ ┌─────────────┐ │
│ │OAuth2      │ │    │ │Permissions │ │    │ │Secrets     │ │    │ │SOC 2        │ │
│ └─────────────┘ │    │ └─────────────┘ │    │ └─────────────┘ │    │ └─────────────┘ │
│                 │    │                 │    │                 │    │                 │
│ ┌─────────────┐ │    │ ┌─────────────┐ │    │ ┌─────────────┐ │    │ ┌─────────────┐ │
│ │MFA Support │ │    │ │Tenant       │ │    │ │Audit       │ │    │ │ISO 27001    │ │
│ └─────────────┘ │    │ │Isolation    │ │    │ │Logging     │ │    │ └─────────────┘ │
└─────────────────┘    └─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │                       │
         └───────────────────────┼───────────────────────┼───────────────────────┘
                                 │                       │
                                 ▼                       ▼
                    ┌─────────────────┐    ┌─────────────────┐
                    │   MONITORING    │    │   INFRASTRUCTURE│
                    │                 │    │                 │
                    │ ┌─────────────┐ │    │ ┌─────────────┐ │
                    │ │Logging      │ │    │ │Rate         │ │
                    │ └─────────────┘ │    │ │Limiting     │ │
                    │                 │    │ └─────────────┘ │
                    │ ┌─────────────┐ │    │                 │
                    │ │Metrics      │ │    │ ┌─────────────┐ │
                    │ └─────────────┘ │    │ │CORS        │ │
                    │                 │    │ │Protection  │ │
                    │ ┌─────────────┐ │    │ └─────────────┘ │
                    │ │Alerts       │ │    │                 │
                    │ └─────────────┘ │    │ ┌─────────────┐ │
                    │                 │    │ │Circuit      │ │
                    │ ┌─────────────┐ │    │ │Breaker      │ │
                    │ │Tracing      │ │    │ └─────────────┘ │
                    │ └─────────────┘ │    └─────────────────┘
                    └─────────────────┘
```

## 🚀 Deployment Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                          DEPLOYMENT ENVIRONMENTS                               │
└─────────────────────────────────────────────────────────────────────────────────┘

    Development                    Staging                    Production
    ┌─────────────────┐          ┌─────────────────┐          ┌─────────────────┐
    │                 │          │                 │          │                 │
    │ ┌─────────────┐ │          │ ┌─────────────┐ │          │ ┌─────────────┐ │
    │ │Local        │ │          │ │Kubernetes   │ │          │ │Kubernetes   │ │
    │ │Development  │ │          │ │Staging      │ │          │ │Production   │ │
    │ └─────────────┘ │          │ └─────────────┘ │          │ └─────────────┘ │
    │                 │          │                 │          │                 │
    │ ┌─────────────┐ │          │ ┌─────────────┐ │          │ ┌─────────────┐ │
    │ │Docker       │ │          │ ┌─────────────┐ │          │ ┌─────────────┐ │
    │ │Compose      │ │          │ │Staging      │ │          │ ┌─────────────┐ │
    │ └─────────────┘ │          │ │Monitoring   │ │          │ │Load        │ │
    │                 │          │ └─────────────┘ │          │ │Balancer    │ │
    │ ┌─────────────┐ │          │                 │          │ └─────────────┘ │
    │ │Test         │ │          │ ┌─────────────┐ │          │                 │
    │ │Environment  │ │          │ │Integration │ │          │ ┌─────────────┐ │
    │ └─────────────┘ │          │ │Tests       │ │          │ │CDN         │ │
    └─────────────────┘          │ └─────────────┘ │          │ └─────────────┘ │
                                 └─────────────────┘          │                 │
                                                              │ ┌─────────────┐ │
                                                              │ │Production  │ │
                                                              │ │Monitoring  │ │
                                                              │ └─────────────┘ │
                                                              └─────────────────┘
                                         │
                                         ▼
                    ┌─────────────────────────────────────────────────────────────┐
                    │                INFRASTRUCTURE SERVICES                     │
                    │                                                             │
                    │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    │
                    │  │MongoDB      │    │Redis       │    │Monitoring   │    │
                    │  │Atlas        │    │Cloud       │    │Grafana/     │    │
                    │  └─────────────┘    └─────────────┘    │Prometheus   │    │
                    │                                         └─────────────┘    │
                    │                                                             │
                    │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    │
                    │  │Logging      │    │CI/CD       │    │Backup       │    │
                    │  │Loki/        │    │GitHub      │    │System       │    │
                    │  │Structured   │    │Actions     │    └─────────────┘    │
                    │  └─────────────┘    └─────────────┘                      │
                    └─────────────────────────────────────────────────────────────┘
```

This comprehensive architecture provides a clear visual representation of the OmniFy Cloud Connect system, showing how all components interact and flow together to create a powerful autonomous marketing intelligence platform.
